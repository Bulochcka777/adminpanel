# Проект "AdminBDvidj"

## Описание

Этот проект представляет собой веб-приложение, разработанное на Go с использованием фреймворка Gin. Он предназначен для управления административными задачами и взаимодействия с базой данных PostgreSQL.

## Структура проекта

AdminBDvidj
├─ .dockerignore
├─ .vscode
│  └─ launch.json
├─ docker-compose.yml
├─ Dockerfile
├─ errors.log
├─ favicon.ico
├─ go.mod
├─ go.sum
├─ handlers
│  ├─ fetch.go
│  ├─ goals.go
│  ├─ goals_bd.go
│  ├─ logs.go
│  ├─ logs_bd.go
│  ├─ process.go
│  ├─ sites.go
│  ├─ sites_bd.go
│  ├─ template_hundler.go
│  ├─ update.go
│  ├─ update_fields.go
│  ├─ users.go
│  ├─ users_bd.go
│  ├─ widgeets.go
│  └─ widgets_bd.go
├─ main.go
├─ models
│  ├─ fetch.go
│  ├─ goal.go
│  ├─ log.go
│  ├─ site.go
│  ├─ update.go
│  ├─ user.go
│  └─ widget.go
├─ Read_me
├─ route
│  ├─ route_config.go
│  ├─ route_goal.go
│  ├─ route_logs.go
│  ├─ route_setup.go
│  ├─ route_siteAlias.go
│  ├─ route_site_status.go
│  ├─ route_updateReg.go
│  ├─ route_users.go
│  ├─ route_widglogs.go
│  └─ rout_countwidg.go
├─ routes
│  └─ routes.go
├─ san.cnf
├─ server.crt
├─ server.key
├─ template.html
└─ widgets


## Описание файлов и папок

- **.dockerignore**: Файл, содержащий список файлов и папок, которые не должны включаться в образ Docker.
- **.vscode/launch.json**: Конфигурация для запуска и отладки проекта в Visual Studio Code.
- **docker-compose.yml**: Файл для запуска многоконтейнерных приложений с помощью Docker Compose.
- **Dockerfile**: Файл для создания Docker-образа приложения.
- **errors.log**: Лог-файл для записи ошибок.
- **favicon.ico**: Иконка сайта.
- **go.mod**: Файл, содержащий зависимости проекта.
- **go.sum**: Файл, содержащий контрольные суммы зависимостей.
- **handlers/**: Папка, содержащая обработчики запросов.
  - **fetch.go**: Обработчик для получения данных.(для сортировки)
  - **goals.go**: Обработчик для управления целями.
  - **goals_bd.go**: Обработчик для взаимодействия с базой данных целей.
  - **logs.go**: Обработчик для управления логами.(+логи виджетов)
  - **logs_bd.go**: Обработчик для взаимодействия с базой данных логов.(+логи виджетов)
  - **process.go**: Обработчик для обработки данных.(Запись параметров "конфига")
  - **sites.go**: Обработчик для управления сайтами.
  - **sites_bd.go**: Обработчик для взаимодействия с базой данных сайтов.
  - **template_hundler.go**: Обработчик для сайта.
  - **update.go**: Обработчик для обновления данных.(изменения "конфига")
  - **update_fields.go**: Обработчик для обновления полей.(отвечает за работу вкл/выкл и отладки скрипта на клиенте)
  - **users.go**: Обработчик для управления пользователями.
  - **users_bd.go**: Обработчик для взаимодействия с базой данных пользователей.
  - **widgeets.go**: Обработчик для управления виджетами.
  - **widgets_bd.go**: Обработчик для взаимодействия с базой данных виджетов.
- **main.go**: Основной файл приложения.
- **models/**: Папка, содержащая модели данных.
  - **fetch.go**: Структура для получения данных.
  - **goal.go**: Структура для целей.
  - **log.go**: Структура для логов.
  - **site.go**: Структура для сайтов.
  - **update.go**: Структура для обновления данных.
  - **user.go**: Структура для пользователей.
  - **widget.go**: Структура для виджетов.
- **Read_me**: Дополнительный файл с описанием проекта.
- **route/**: Папка, содержащая маршруты взаимодействия клиента и сервера.
  - **route_config.go**: Конфигурация маршрутов (параметры для работы скрипта на клиенте).
  - **route_goal.go**: Маршруты для целей.
  - **route_logs.go**: Маршруты для логов.
  - **route_setup.go**: Настройка маршрутов.
  - **route_siteAlias.go**: Маршруты для алиасов сайтов.
  - **route_site_status.go**: Маршруты для статуса сайтов.
  - **route_updateReg.go**: Маршруты для обновления регистрации.
  - **route_users.go**: Маршруты для пользователей.
  - **route_widglogs.go**: Маршруты для логов виджетов.
  - **rout_countwidg.go**: Маршруты для подсчета виджетов.
- **routes/**: Папка, содержащая основные маршруты.
  - **routes.go**: Основной файл маршрутов.
- **san.cnf**: Конфигурационный файл для SSL.
- **server.crt**: Сертификат сервера.
- **server.key**: Ключ сервера.
- **template.html**: Шаблон HTML.
- **widgets/**: Папка, содержащая виджеты.

## Описание энд-поинтов

===============================================================

### Сервер

**router.GET("/")** 
**router.POST("/goal")**

Описание: Создание новой цели.
Параметры: Данные новой цели.

**router.POST("/update-goal")** 

Описание: Обнавление целей.

**router.POST("/delete-goal")**

Описание: Удаление целей.

**router.POST("/delete-empty-users")** 

Описание: Удаление строк пользователя.

**router.POST("/add-site")** 

Описание: Добавление сайтов.

**router.POST("/delete-site")** 

Описание: Удаление сайтов.

**router.GET("/get-sites")** 

Описание: Получение списка сайтов.

**router.GET("/get-widgets")** 

Описание: Получение списка виджетов.

**router.POST("/update-fields")** 

Описание: Обнавление параметров сайта(вкл\выкл, отладка).
Параметры: Параметры сайта.

**router.GET("/fetch_data")** 

Описание: Заполнение выпадающий списков.
Параметры: Параметры списков.

**router.POST("/update-script-param")** 

Описание: Обнавление данныех с таблицы параметров скрипта.
Параметры: Параметры скрипта.

**router.POST("/process")** 

Описание: Запись данныех с таблицы параметров скрипта.
Параметры: Параметры скрипта.

**router.GET("/filter-logs")** 

Описание: Фильтрация вкладки логов.
Параметры: Параметры фильтрации.

**router.GET("/filter-analytics")** 

Описание: Фильтрация аналитической вкладки.
Параметры: Параметры фильтрации.

### С клиента

**router.POST("/count-widget")** 

Описание: отправка подсчета показа виджетов.
Параметры: Данные виджета.

**router.POST("/config")** 

Описание: отправка конфигурации.
Параметры: Параметры конфигурации.

**router.POST("/add-goal")** 

Описание: Добавление новой цели.
Параметры: Данные новой цели.

**router.POST("/add-log")** 

Описание: Добавление нового лога.
Параметры: Данные лога.

**router.POST("/site_status")** 

Описание: Отправка статуса сайта.
Параметры: Название сайта.

**router.POST("/update-user-reg")** 

Описание: Обновление регистрационных данных пользователя.
Параметры: Данные для обновления.

**router.POST("/add-user")** 

Описание: Добавление нового пользователя.
Параметры: Данные нового пользователя.

**router.POST("/add-log-widget")**

Описание: Добавление лога виджета.
Параметры: Данные лога виджета.


## Установка и запуск

### Запустите приложение:
```go run main.go```


### Запустите с помощью Docker:

```docker-compose up --build```# adminpanel
